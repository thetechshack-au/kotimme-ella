{% liquid
  assign variant_count = product.variants | size
  assign current_variant = product.selected_or_first_available_variant
  assign product_max_stock = block.settings.product_max_stock
  assign text_color = block.settings.text_color
  assign progress_bar_height = block.settings.progress_bar_height | append: 'px'
  assign progress_bar_color = block.settings.progress_bar_color
  assign progress_bar_color_2 = block.settings.progress_bar_color_2
  assign type_preset = block.settings.type_preset
%}

{% render 'product-hot-stock-main',
  block: block,
  product: product,
  variantCount: variant_count,
  productMaxStock: product_max_stock,
  current_variant: current_variant,
  text_color: text_color,
  type_preset: type_preset,
  progress_bar_height: progress_bar_height,
  progress_bar_color: progress_bar_color,
  progress_bar_color_2: progress_bar_color_2
%}

<script>
  {% assign selected_variant = product.selected_or_first_available_variant %}
  window.product_inventory_array_{{ product.id }} = {
    '{{ selected_variant.id }}': '{{ selected_variant.inventory_quantity }}',
  };

  window.inventory_text = {
    hotStock: `{{ 'products.product.hot_stock' | t : inventory: '[inventory]' }}`,
  }
</script>

{% schema %}
{
  "name": "t:names.hot_stock",
  "tag": null,
  "settings": [
    {
      "type": "number",
      "id": "product_max_stock",
      "label": "t:settings.product_max_stock",
      "default": 20
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:settings.text_color",
      "default": "#d62828"
    },
    {
      "type": "select",
      "id": "type_preset",
      "label": "t:settings.preset",
      "options": [
        {
          "value": "rte",
          "label": "t:options.default"
        },
        {
          "value": "paragraph",
          "label": "t:options.paragraph"
        },
        {
          "value": "h1",
          "label": "t:options.h1"
        },
        {
          "value": "h2",
          "label": "t:options.h2"
        },
        {
          "value": "h3",
          "label": "t:options.h3"
        },
        {
          "value": "h4",
          "label": "t:options.h4"
        },
        {
          "value": "h5",
          "label": "t:options.h5"
        },
        {
          "value": "h6",
          "label": "t:options.h6"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "rte",
      "info": "t:info.edit_presets_in_theme_settings"
    },
    {
      "type": "select",
      "id": "font",
      "label": "t:settings.font",
      "options": [
        {
          "value": "var(--font-body--family)",
          "label": "t:options.body"
        },
        {
          "value": "var(--font-subheading--family)",
          "label": "t:options.subheading"
        },
        {
          "value": "var(--font-heading--family)",
          "label": "t:options.heading"
        }
      ],
      "default": "var(--font-body--family)",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "font_size",
      "label": "t:settings.size",
      "options": [
        {
          "value": "",
          "label": "t:options.default"
        },
        {
          "value": "1.0rem",
          "label": "10px"
        },
        {
          "value": "1.2rem",
          "label": "12px"
        },
        {
          "value": "1.4rem",
          "label": "14px"
        },
        {
          "value": "1.6rem",
          "label": "16px"
        },
        {
          "value": "1.8rem",
          "label": "18px"
        },
        {
          "value": "2.0rem",
          "label": "20px"
        },
        {
          "value": "2.2rem",
          "label": "22px"
        },
        {
          "value": "2.4rem",
          "label": "24px"
        },
        {
          "value": "2.6rem",
          "label": "26px"
        },
        {
          "value": "2.8rem",
          "label": "28px"
        },
        {
          "value": "3.0rem",
          "label": "30px"
        },
        {
          "value": "3.2rem",
          "label": "32px"
        },
        {
          "value": "3.4rem",
          "label": "34px"
        },
        {
          "value": "3.6rem",
          "label": "36px"
        },
        {
          "value": "4.0rem",
          "label": "40px"
        },
        {
          "value": "5.0rem",
          "label": "50px"
        },
        {
          "value": "6.0rem",
          "label": "60px"
        },
        {
          "value": "7.0rem",
          "label": "70px"
        },
        {
          "value": "8.0rem",
          "label": "80px"
        },
        {
          "value": "9.0rem",
          "label": "90px"
        },
        {
          "value": "10.0rem",
          "label": "100px"
        },
        {
          "value": "12.0rem",
          "label": "120px"
        }
      ],
      "default": "1.6rem",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "line_height",
      "label": "t:settings.line_height",
      "options": [
        {
          "value": "tight",
          "label": "t:options.tight"
        },
        {
          "value": "normal",
          "label": "t:options.normal"
        },
        {
          "value": "loose",
          "label": "t:options.loose"
        }
      ],
      "default": "normal",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "letter_spacing",
      "label": "t:settings.letter_spacing",
      "options": [
        {
          "value": "tight",
          "label": "t:options.tight"
        },
        {
          "value": "normal",
          "label": "t:options.normal"
        },
        {
          "value": "loose",
          "label": "t:options.loose"
        }
      ],
      "default": "normal",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "case",
      "label": "t:settings.case",
      "options": [
        {
          "value": "none",
          "label": "t:options.default"
        },
        {
          "value": "uppercase",
          "label": "t:options.uppercase"
        },
        {
          "value": "capitalize",
          "label": "t:options.capitalize"
        }
      ],
      "default": "none",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "header",
      "content": "t:content.progress_bar"
    },
    {
      "type": "range",
      "id": "progress_bar_height",
      "label": "t:settings.progress_bar_height",
      "min": 1,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 5
    },
    {
      "type": "color",
      "id": "progress_bar_color",
      "label": "t:settings.progress_bar_color_1",
      "default": "#d62828"
    },
    {
      "type": "color",
      "id": "progress_bar_color_2",
      "label": "t:settings.progress_bar_color_2",
      "default": "#69c69c"
    }
  ],
  "presets": [
    {
      "name": "t:names.hot_stock",
      "category": "t:categories.product"
    }
  ]
}
{% endschema %}