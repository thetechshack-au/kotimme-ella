{% liquid
    assign pl = block.settings.padding_left
    assign pr = block.settings.padding_right
    assign pt = block.settings.padding_top
    assign pb = block.settings.padding_bottom

    assign label = block.settings.label
    assign label_name = label | handleize
    assign show_label = block.settings.show_label
    assign label_mb = block.settings.label_mb
    assign option_type_preset = block.settings.option_type_preset

    assign options = block.settings.options | split: '|'
    assign options_layout = block.settings.options_layout
%}

{%- capture attr -%}
class=" w-full block contact-form-select" {{ block.shopify_attributes }}
style="
{% if pl != 0 %}--pl:{{ pl }}px;{% endif %}
{% if pt != 0 %}--pt:{{ pt }}px;{% endif %}
{% if pb != 0 %}--pb:{{ pb }}px;{% endif %}
{% if pr != 0 %}--pr:{{ pr }}px;{% endif %}
"
{%- endcapture -%}

{% if label != blank %}
  <div class="contact-form-row" style="--formRowWidth: {{ input_width }}%;">
    <label for="{{ block.id }}" style="--mb:{{ label_mb }}px;" class="block {{ label_type_preset }}">{{ label }}</label>
    <div class="form-ratio form-ratio--{{ options_layout }}">
      {% for option in options %}
        <div class="form-ratio-item">
          <input type="radio" name="contact[{{ label_name }}]" value="{{ option }}" id="{{ block.id }}-{{ option }}"{% if forloop.first %} checked{% endif %}>
          <label class="{{ option_type_preset }}" for="{{ block.id }}-{{ option }}">{{ option }}</label>
        </div>
      {% endfor %}
    </div>
  </div>
{% else %}
  <div class="form-ratio form-ratio--{{ options_layout }}">
    {% for option in options %}
      <div class="form-ratio-item">
        <input type="radio" name="contact[{{ label_name }}]" value="{{ option }}" id="{{ block.id }}-{{ option }}"{% if forloop.first %} checked{% endif %}>
        <label class="{{ option_type_preset }}" for="{{ block.id }}-{{ option }}">{{ option }}</label>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% schema %}
{
  "name": "Radio",
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "t:settings.label"
    },
    {
      "type": "checkbox",
      "id": "show_label",
      "label": "t:settings.show_label",
      "default": true
    },
    {
      "type": "range",
      "id": "label_mb",
      "label": "t:settings.spacing_bottom",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "text",
      "id": "options",
      "label": "Options",
      "info": "Separate options with a pipe (|)",
      "default": "Option 1|Option 2|Option 3"
    },
    {
      "type": "select",
      "id": "options_layout",
      "label": "Options Layout",
      "options": [
        {
          "value": "horizontal",
          "label": "Horizontal"
        },
        {
          "value": "vertical",
          "label": "Vertical"
        }
      ],
      "default": "horizontal"
    },
    {
      "type": "select",
      "id": "option_type_preset",
      "label": "Option font size",
      "options": [
        {
          "value": "",
          "label": "t:options.default"
        },
        {
          "value": "paragraph",
          "label": "t:options.paragraph"
        },
        {
          "value": "h1",
          "label": "t:options.h1"
        },
        {
          "value": "h2",
          "label": "t:options.h2"
        },
        {
          "value": "h3",
          "label": "t:options.h3"
        },
        {
          "value": "h4",
          "label": "t:options.h4"
        },
        {
          "value": "h5",
          "label": "t:options.h5"
        },
        {
          "value": "h6",
          "label": "t:options.h6"
        }
      ],
      "default": "paragraph",
      "info": "t:info.edit_presets_in_theme_settings"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding_left",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding_right",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "select",
      "id": "border_style",
      "label": "t:settings.border",
      "options": [
        {
          "value": "all",
          "label": "t:options.all"
        },
        {
          "value": "underline",
          "label": "t:options.underline"
        },
        {
          "value": "none",
          "label": "t:options.none"
        }
      ],
      "default": "all"
    },
    {
      "type": "range",
      "id": "input_border_width",
      "label": "t:settings.border_width",
      "min": 0,
      "max": 4,
      "step": 0.5,
      "unit": "px",
      "default": 1,
      "visible_if": "{{ block.settings.border_style != 'none' }}"
    },
    {
      "type": "range",
      "id": "input_border_radius",
      "label": "t:settings.border_radius",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0,
      "visible_if": "{{ block.settings.border_style != 'underline' }}"
    }
  ],
  "presets": [
    {
      "name": "Radio"
    }
  ]
}
{% endschema %}