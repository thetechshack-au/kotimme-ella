{%- doc -%}
  Renders controls for a slider component

  @param {string} [style] - { 'dots' | 'counter' | 'thumbnails' | 'none' } The display style of the controls
  @param {boolean} [autoplay] - Whether the controls will display an autoplay option
  @param {boolean} [arrows_on_media] - Whether the controls will display as floating icons on the media
  @param {boolean} [controls_on_media] - Whether the controls will display as floating controls on the media
  @param {media[]} [thumbnails] - Array of media to be displayed as thumbnails, sorted.
  @param {string} [pagination_position] - { 'left' | 'center' | 'right' } Sets the pagination position, defaults to 'center' if none passed
  @param {string} [icon_style] - The style of the icon, defaults to 'arrow'
  @param {string} [aspect_ratio] - The aspect ratio of thumbnails, if applicable. defaults to 'adapt'
  @param {string} [class] - Additional classes to apply to the controls
  @param {string} [thumbnail_position] - The position of the thumbnails, defaults to 'bottom'
  @param {string} [thumbnail_direction] - The direction of the thumbnails, defaults to 'horizontal'
  @param {number} [thumbnail_width] - The width of the thumbnails, defaults to 70px
  @param {string} [video_type] - The type of video, defaults to 'inline'
  @param {boolean} [loop] - Whether the slideshow will loop, defaults to false
  @example
  {%- render 'swiper-controls', style: 'dots', video_type: 'inline' -%}
{%- enddoc -%}

{%- liquid
  if aspect_ratio == null
    assign aspect_ratio = 'adapt'
  endif

  if pagination_position == null
    assign pagination_position = 'center'
  endif
-%}

<div
  class="swiper-controls__thumbnails-container {{ class }}"
  {% if controls_on_media %}
    controls-on-media
  {% endif %}
  {% if arrows_on_media or icon_style == 'none' %}
    icons-on-media
  {% endif %}
  {% if style == 'thumbnails' %}
    thumbnails
  {% endif %}
  data-thumbnail-position="{{ thumbnail_position }}"
  data-thumbnail-direction="{{ thumbnail_direction }}"
  {% if thumbnail_position == 'bottom' %}
    style="
      {% render 'swiper-style',
        columns_mobile: 4,
        columns_tablet: 4,
        columns_desktop: 4,
        columns_gap: 16,
      %}
      {% if thumbnail_width %}
        --thumbnail-width: {{ thumbnail_width }}px;
      {% endif %}
    "
  {% endif %}
>
  <div 
    class="swiper swiper-controls__thumbnails"
    data-thumbnail-position="{{ thumbnail_position }}"
    data-thumbnail-direction="{{ thumbnail_direction }}"
    data-loop="{% if loop %}true{% else %}false{% endif %}"
  >
    <div
      class="swiper-wrapper swiper-controls__thumbnails w-full{% if thumbnail_position == 'bottom' %} grid-layout-no-js list-unstyled lg:grid-layout--4 md:grid-layout--4 grid--4-col-mobile{% else %}  grid-layout-no-js grid-mobile-layout-no-js list-unstyled grid--4-col-mobile{% endif %}"
      style="
        --card-grid-per-row-desktop: 4;
        --card-grid-per-row-tablet: 4;
        --card-grid-per-row-mobile: 4;
      "
      pagination-position="{{ pagination_position }}"
    >
      {% if autoplay %}
        <button
          type="button"
          class="swiper-control button-secondary button-unstyled icon-pause"
          aria-label="{{ 'accessibility.slideshow_pause' | t }}"
        >
          {{- 'icon-pause.svg' | inline_asset_content -}}
        </button>
        <button
          type="button"
          class="swiper-control button-secondary button-unstyled icon-play"
          aria-label="{{ 'accessibility.slideshow_play' | t }}"
        >
          {{- 'icon-play.svg' | inline_asset_content -}}
        </button>
      {% endif %}

      {% case style %}
        {% when 'thumbnails' %}
          {% for media in thumbnails %}
            {% if media.media_type == 'image' %}
              <button
                class=" swiper-slide swiper-control button button-unstyled swiper-controls__thumbnail"
                data-index="{{ forloop.index0 }}"
                aria-label="{{ 'accessibility.slide_status' | t: index: forloop.index, length: forloop.length }}"
                style="--aspect-ratio: {% if aspect_ratio == 'adapt' %}{{ media.preview_image.aspect_ratio | default: 1.0 }}{% else %}{{ aspect_ratio }}{% endif %};"
              >
                {{ media.preview_image | image_url: width: 144 | image_tag: loading: 'lazy', alt: media.alt | escape }}
              </button>
            {%- elsif media.media_type == 'model' -%}
              <button
                class=" swiper-slide swiper-control button button-unstyled swiper-controls__thumbnail"
                data-index="{{ forloop.index0 }}"
                aria-label="{{ 'accessibility.slide_status' | t: index: forloop.index, length: forloop.length }}"
                style="--aspect-ratio: {% if aspect_ratio == 'adapt' %}{{ media.preview_image.aspect_ratio | default: 1.0 }}{% else %}{{ aspect_ratio }}{% endif %};"
              >
                {{ media.preview_image | image_url: width: 144 | image_tag: loading: 'lazy', alt: media.alt | escape }}

                <span class="swiper-controls__thumbnail-badge">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                    focusable="false"
                    class="icon icon-3d-model"
                    fill="none"
                    viewBox="0 0 18 21"
                  >
                    {% render 'icon', icon: '3d-model' %}
                  </svg>
                </span>
              </button>
            {%- elsif video_type == 'inline' -%}
              <button
                class=" swiper-slide swiper-control button button-unstyled swiper-controls__thumbnail"
                data-index="{{ forloop.index0 }}"
                aria-label="{{ 'accessibility.slide_status' | t: index: forloop.index, length: forloop.length }}"
                style="--aspect-ratio: {% if aspect_ratio == 'adapt' %}{{ media.preview_image.aspect_ratio | default: 1.0 }}{% else %}{{ aspect_ratio }}{% endif %};"
              >
                {{ media.preview_image | image_url: width: 144 | image_tag: loading: 'lazy', alt: media.alt | escape }}

                <span class="swiper-controls__thumbnail-badge">
                  {{ 'icon-play.svg' | inline_asset_content }}
                </span>
              </button>
            {%- endif-%}
          {% endfor %}
      {% endcase %}
    </div>
  </div>
</div>